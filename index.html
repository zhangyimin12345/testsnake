
<!DOCTYPE html>
<html lang="zh-CN">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Snake ä»£ç ç¼–è¾‘å™¨</title>
	<style>
		body {
			margin: 0;
			padding: 0;
			font-family: Arial, sans-serif;
			display: flex;
			flex-direction: column;
			height: 100vh;
			overflow: hidden;
			background-color: #1e1e1e;
			color: #d4d4d4;
		}

		.header {
			background-color: #252526;
			color: #d4d4d4;
			padding: 10px 20px;
			display: flex;
			justify-content: space-between;
			align-items: center;
			border-bottom: 1px solid #1e1e1e;
		}

		.title {
			font-size: 20px;
			font-weight: bold;
		}

		.controls {
			display: flex;
			gap: 10px;
			align-items: center;
		}

		button,
		select,
		input {
			padding: 5px 10px;
			border-radius: 4px;
			border: none;
			background-color: #3c3c3c;
			color: #d4d4d4;
			cursor: pointer;
		}

		button:hover {
			background-color: #2a2d2e;
		}

		select {
			min-width: 120px;
		}

		input[type="number"] {
			width: 60px;
			-moz-appearance: textfield;
			appearance: textfield;
		}

		input[type="number"]::-webkit-outer-spin-button,
		input[type="number"]::-webkit-inner-spin-button {
			-webkit-appearance: none;
			margin: 0;
		}

		.editor-container {
			flex: 1;
			display: flex;
			background-color: #1e1e1e;
			height: 1vh;
		}

		#editor {
			width: 100%;
			height: 100%;
		}

		#preview {
			width: 50%;
			height: 100%;
			border: none;
			background-color: #1e1e1e;
			padding: 20px;
			overflow: auto;
			box-sizing: border-box;
			color: #d4d4d4;
		}

		.splitter {
			width: 5px;
			background-color: #252526;
			cursor: col-resize;
		}

		.status-bar {
			background-color: #252526;
			color: #858585;
			padding: 5px 10px;
			font-size: 12px;
			display: flex;
			justify-content: space-between;
			border-top: 1px solid #1e1e1e;
		}

		.theme-toggle {
			position: fixed;
			bottom: 10px;
			right: 10px;
			z-index: 100;
			background-color: #3c3c3c;
			color: #d4d4d4;
			border: none;
			border-radius: 50%;
			width: 40px;
			height: 40px;
			font-size: 20px;
			cursor: pointer;
			display: flex;
			align-items: center;
			justify-content: center;
			box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
		}

		.font-controls {
			display: flex;
			gap: 5px;
			align-items: center;
		}

		.font-controls label {
			font-size: 12px;
			margin-right: -5px;
		}

		.view-toggle {
			position: fixed;
			bottom: 60px;
			right: 10px;
			z-index: 100;
			background-color: #3c3c3c;
			color: #d4d4d4;
			border: none;
			border-radius: 50%;
			width: 40px;
			height: 40px;
			font-size: 20px;
			cursor: pointer;
			display: flex;
			align-items: center;
			justify-content: center;
			box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
		}

		/* Markdown é¢„è§ˆæ ·å¼ - æš—è‰²ä¸»é¢˜ */
		#preview h1,
		#preview h2,
		#preview h3,
		#preview h4,
		#preview h5,
		#preview h6 {
			margin-top: 1em;
			margin-bottom: 0.5em;
			font-weight: bold;
			color: #d4d4d4;
		}

		#preview h1 {
			font-size: 2em;
			border-bottom: 1px solid #333;
			color: #569cd6;
		}

		#preview h2 {
			font-size: 1.5em;
			border-bottom: 1px solid #333;
			color: #4ec9b0;
		}

		#preview h3 {
			font-size: 1.25em;
			color: #c586c0;
		}

		#preview h4 {
			font-size: 1em;
			color: #9cdcfe;
		}

		#preview h5 {
			font-size: 0.875em;
			color: #ce9178;
		}

		#preview h6 {
			font-size: 0.85em;
			color: #858585;
		}

		#preview p {
			margin: 0 0 1em;
			color: #d4d4d4;
		}

		#preview ul,
		#preview ol {
			margin: 0 0 1em 2em;
			padding: 0;
			color: #d4d4d4;
		}

		#preview li {
			margin: 0.25em 0;
			color: #d4d4d4;
		}

		#preview blockquote {
			margin: 0 0 1em;
			padding: 0 1em;
			border-left: 4px solid #6a9955;
			color: #d4d4d4;
			background-color: #252526;
		}

		#preview pre {
			background-color: #252526;
			padding: 1em;
			border-radius: 3px;
			overflow: auto;
			border: 1px solid #333;
		}

		#preview code {
			font-family: Consolas, Monaco, monospace;
			background-color: #252526;
			padding: 0.2em 0.4em;
			border-radius: 3px;
			color: #d4d4d4;
		}

		#preview a {
			color: #569cd6;
			text-decoration: none;
		}

		#preview a:hover {
			text-decoration: underline;
		}

		#preview img {
			max-width: 100%;
			background-color: white;
			padding: 5px;
			border-radius: 3px;
		}

		#preview table {
			border-collapse: collapse;
			margin: 1em 0;
			width: 100%;
		}

		#preview th,
		#preview td {
			border: 1px solid #333;
			padding: 0.5em 1em;
			color: #d4d4d4;
		}

		#preview th {
			background-color: #252526;
			font-weight: bold;
		}

		#preview tr:nth-child(even) {
			background-color: #252526;
		}

		/* KaTeX å…¬å¼æ ·å¼ */
		.katex {
			font-size: 1.1em !important;
			color: #d4d4d4 !important;
		}

		/* æ•°å­¦å…¬å¼å—æ ·å¼ */
		.math-block {
			text-align: center;
			margin: 1em 0;
			padding: 0.5em;
			background-color: #252526;
			border-radius: 3px;
			overflow-x: auto;
		}

		/* Highlight.js ä¸»é¢˜ - ç±»ä¼¼ VS Code æš—è‰²ä¸»é¢˜ */
		.hljs {
			display: block;
			overflow-x: auto;
			padding: 0.5em;
			background: #1e1e1e;
			color: #d4d4d4;
		}

		.hljs-keyword,
		.hljs-literal,
		.hljs-name,
		.hljs-symbol {
			color: #569cd6;
		}

		.hljs-link {
			color: #569cd6;
			text-decoration: underline;
		}

		.hljs-built_in,
		.hljs-type {
			color: #4ec9b0;
		}

		.hljs-number,
		.hljs-class {
			color: #b5cea8;
		}

		.hljs-string,
		.hljs-meta-string {
			color: #ce9178;
		}

		.hljs-regexp,
		.hljs-template-tag {
			color: #9a5334;
		}

		.hljs-subst,
		.hljs-function,
		.hljs-title,
		.hljs-params,
		.hljs-formula {
			color: #dcdcaa;
		}

		.hljs-comment,
		.hljs-quote {
			color: #6a9955;
			font-style: italic;
		}

		.hljs-doctag {
			color: #608b4e;
		}

		.hljs-meta,
		.hljs-meta-keyword,
		.hljs-tag {
			color: #9b9b9b;
		}

		.hljs-variable,
		.hljs-template-variable {
			color: #bd63c5;
		}

		.hljs-attr,
		.hljs-attribute,
		.hljs-builtin-name {
			color: #9cdcfe;
		}

		.hljs-section {
			color: gold;
		}

		.hljs-emphasis {
			font-style: italic;
		}

		.hljs-strong {
			font-weight: bold;
		}

		.hljs-bullet,
		.hljs-selector-tag,
		.hljs-selector-id,
		.hljs-selector-class,
		.hljs-selector-attr,
		.hljs-selector-pseudo {
			color: #d7ba7d;
		}

		.hljs-addition {
			background-color: #144212;
			display: inline-block;
			width: 100%;
		}

		.hljs-deletion {
			background-color: #600;
			display: inline-block;
			width: 100%;
		}
	</style>
	<!-- å¼•å…¥ highlight.js -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/vs2015.min.css">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
	<!-- å¼•å…¥ KaTeX -->
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css">
	<script src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.js"></script>
	<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/contrib/auto-render.min.js"
		crossorigin="anonymous" onload="renderMathInElement(document.body);"></script>
	<!-- å¼•å…¥ marked.js -->
	<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
	<script>
		// é…ç½® marked æ”¯æŒ KaTeX å’Œä»£ç é«˜äº®
		marked.setOptions({
			highlight: function (code, lang) {
				const language = hljs.getLanguage(lang) ? lang : 'plaintext';
				return hljs.highlight(code.text, { language }).value;
			},
			breaks: false,
			gfm: true,
			pedantic: false,
			smartLists: true,
			smartypants: false,
			xhtml: false
		});

		// è‡ªå®šä¹‰ marked æ¸²æŸ“å™¨ä»¥æ”¯æŒæ•°å­¦å…¬å¼
		const renderer = {
			code(code, infostring) {
				infostring = infostring || code.lang;
				// console.log(code, infostring);
				if (infostring === 'math') {
					return `<div class="math-block">${katex.renderToString(code.text, { throwOnError: false })}</div>`;
				}
				let s = code.text;
				s = s.replaceAll('&', '&amp;');
				s = s.replaceAll('<', '&lt;');
				s = s.replaceAll('>', '&gt;');
				return `<pre><code>${s}</code></pre>`;
			}
		};

		marked.use({ renderer });
	</script>
</head>

<body>
	<div class="header">
		<div class="title">Snake ä»£ç ç¼–è¾‘å™¨</div>
		<div class="controls">
			<select id="language-select">
				<option value="javascript">JavaScript</option>
				<option value="typescript">TypeScript</option>
				<option value="html">HTML</option>
				<option value="css">CSS</option>
				<option value="python">Python</option>
				<option value="java">Java</option>
				<option value="csharp">C#</option>
				<option value="cpp">C++</option>
				<option value="go">Go</option>
				<option value="rust">Rust</option>
				<option value="php">PHP</option>
				<option value="sql">SQL</option>
				<option value="json">JSON</option>
				<option value="xml">XML</option>
				<option value="markdown" selected>Markdown</option>
			</select>

			<div class="font-controls">
				<label for="font-family">å­—ä½“:</label>
				<select id="font-family">
					<option value="'Courier New', monospace">Courier New</option>
					<option value="'Consolas', monospace" selected>Consolas</option>
					<option value="'Fira Code', monospace">Fira Code</option>
					<option value="'Source Code Pro', monospace">Source Code Pro</option>
					<option value="'Roboto Mono', monospace">Roboto Mono</option>
				</select>
			</div>

			<div class="font-controls">
				<label for="font-size">å¤§å°:</label>
				<input type="number" id="font-size" min="8" max="32" value="14">
			</div>

			<div class="font-controls">
				<label for="tab-size">Tab:</label>
				<input type="number" id="tab-size" min="1" max="8" value="4">
			</div>

			<button id="run-btn">è¿è¡Œ (JS)</button>
			<button id="preview-btn">é¢„è§ˆ</button>
			<button id="save-btn">ä¿å­˜</button>
		</div>
	</div>

	<div class="editor-container">
		<div id="editor"></div>
		<div class="splitter" id="splitter"></div>
		<div id="preview"></div>
	</div>

	<div class="status-bar">
		<div id="cursor-position">è¡Œ: 1, åˆ—: 1</div>
		<div id="file-info">æœªä¿å­˜çš„æ–‡ä»¶</div>
	</div>

	<button class="theme-toggle" id="theme-toggle">ğŸŒ“</button>
	<button class="view-toggle" id="view-toggle">ğŸ‘ï¸</button>

	<script>
		// åŠ è½½ Monaco Editor è„šæœ¬
		const loadMonacoScript = () => {
			return new Promise((resolve) => {
				const script = document.createElement('script');
				script.src = 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.40.0/min/vs/loader.min.js';
				script.onload = () => {
					// é…ç½® Monaco Editor çš„è·¯å¾„
					require.config({ paths: { vs: 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.40.0/min/vs' } });

					// åŠ è½½ editor æ ¸å¿ƒ
					require(['vs/editor/editor.main'], () => {
						resolve();
					});
				};
				document.body.appendChild(script);
			});
		};

		// åˆå§‹åŒ–ç¼–è¾‘å™¨
		const initEditor = async () => {
			await loadMonacoScript();

			// é»˜è®¤ä»£ç 
			const defaultCode = {
				'javascript': '// JavaScript ä»£ç ç¤ºä¾‹\nfunction greet(name) {\n  return `Hello, ${name}!`;\n}\n\nconsole.log(greet("World"));',
				'typescript': '// TypeScript ä»£ç ç¤ºä¾‹\nfunction greet(name: string): string {\n  return `Hello, ${name}!`;\n}\n\nconsole.log(greet("World"));',
				'html': '<!DOCTYPE html>\n<html>\n<head>\n  <title>HTML é¢„è§ˆç¤ºä¾‹</title>\n  <style>\n    body {\n      font-family: Arial, sans-serif;\n      margin: 0;\n      padding: 20px;\n      background-color: #f5f5f5;\n    }\n    h1 {\n      color: #333;\n    }\n    .container {\n      max-width: 800px;\n      margin: 0 auto;\n      background: white;\n      padding: 20px;\n      border-radius: 5px;\n      box-shadow: 0 2px 5px rgba(0,0,0,0.1);\n    }\n  </style>\n</head>\n<body>\n  <div class="container">\n    <h1>HTML é¢„è§ˆåŠŸèƒ½</h1>\n    <p>ç¼–è¾‘å·¦ä¾§çš„HTMLä»£ç ï¼Œå³ä¾§ä¼šå®æ—¶æ˜¾ç¤ºé¢„è§ˆæ•ˆæœã€‚</p>\n    <p>è¯•è¯•ä¿®æ”¹è¿™æ®µæ–‡å­—çœ‹çœ‹æ•ˆæœï¼</p>\n  </div>\n</body>\n</html>',
				'css': '/* CSS ä»£ç ç¤ºä¾‹ */\nbody {\n  font-family: Arial, sans-serif;\n  margin: 0;\n  padding: 20px;\n  background-color: #f5f5f5;\n}\n\nh1 {\n  color: #333;\n}',
				'python': '# Python ä»£ç ç¤ºä¾‹\ndef greet(name):\n    return f"Hello, {name}!"\n\nprint(greet("World"))',
				'java': '// Java ä»£ç ç¤ºä¾‹\npublic class Main {\n    public static void main(String[] args) {\n        System.out.println("Hello World!");\n    }\n}',
				'csharp': '// C# ä»£ç ç¤ºä¾‹\nusing System;\n\nclass Program {\n    static void Main() {\n        Console.WriteLine("Hello World!");\n    }\n}',
				'cpp': '// C++ ä»£ç ç¤ºä¾‹\n# include <bits/stdc++.h>\nusing namespace std;\nint main()\n{\n\t\n\treturn 0;\n}',
				'go': '// Go ä»£ç ç¤ºä¾‹\npackage main\n\nimport "fmt"\n\nfunc main() {\n    fmt.Println("Hello World!")\n}',
				'rust': '// Rust ä»£ç ç¤ºä¾‹\nfn main() {\n    println!("Hello World!");\n}',
				'php': '<?php\n// PHP ä»£ç ç¤ºä¾‹\nfunction greet($name) {\n    return "Hello, $name!";\n}\n\necho greet("World");\n?>',
				'sql': '-- SQL ä»£ç ç¤ºä¾‹\nSELECT * FROM users WHERE age > 18 ORDER BY name ASC;',
				'json': '{\n  "name": "John Doe",\n  "age": 30,\n  "isActive": true,\n  "address": {\n    "street": "123 Main St",\n    "city": "New York"\n  },\n  "hobbies": ["reading", "hiking"]\n}',
				'xml': '<!-- XML ä»£ç ç¤ºä¾‹ -->\n<person>\n  <name>John Doe</name>\n  <age>30</age>\n  <address>\n    <street>123 Main St</street>\n    <city>New York</city>\n  </address>\n</person>',
				'markdown': '# Markdown ç¤ºä¾‹\n\nè¿™æ˜¯ä¸€ä¸ª **Markdown** æ–‡æ¡£ç¤ºä¾‹ã€‚\n\n## æ•°å­¦å…¬å¼\n\nè¡Œå†…å…¬å¼: $E = mc^2$\n\nå—çº§å…¬å¼:\n\n$$\n\\int_a^b f(x) dx = F(b) - F(a)\n$$\n\næˆ–è€…:\n\n```math\n\\sum_{i=1}^n i = \\frac{n(n+1)}{2}\n```\n\n## ä»£ç ç¤ºä¾‹\n\n```javascript\n// JavaScript ä»£ç å—\nfunction hello() {\n  console.log("Hello World!");\n}\n```\n\n## å…¶ä»–å…ƒç´ \n\n- åˆ—è¡¨é¡¹ 1\n- åˆ—è¡¨é¡¹ 2\n\n[é“¾æ¥](https://example.com)\n\n> å¼•ç”¨å†…å®¹ç¤ºä¾‹\n\n| è¡¨æ ¼ç¤ºä¾‹ | ç¬¬äºŒåˆ— |\n|----------|--------|\n| è¡Œ1      | æ•°æ®1  |\n| è¡Œ2      | æ•°æ®2  |'
			};

			// åˆ›å»ºç¼–è¾‘å™¨
			const editor = monaco.editor.create(document.getElementById('editor'), {
				value: defaultCode['markdown'],
				language: 'markdown',
				theme: 'vs-dark',
				automaticLayout: true,
				minimap: { enabled: true },
				fontSize: 14,
				fontFamily: "'Consolas', monospace",
				lineNumbers: 'on',
				roundedSelection: true,
				scrollBeyondLastLine: false,
				readOnly: false,
				renderWhitespace: 'selection',
				tabSize: 4
			});
			editor.getModel().updateOptions({ tabSize: 4 });

			// è·å–é¢„è§ˆå…ƒç´ 
			const preview = document.getElementById('preview');

			// æ›´æ–°é¢„è§ˆ
			const updatePreview = () => {
				const language = document.getElementById('language-select').value;
				const content = editor.getValue();

				if (language === 'html') {
					// åˆ›å»ºiframeæ¥å®‰å…¨é¢„è§ˆHTML
					const iframe = document.createElement('iframe');
					iframe.style.width = '100%';
					iframe.style.height = '100%';
					iframe.style.border = 'none';
					iframe.srcdoc = content;

					// æ¸…ç©ºé¢„è§ˆåŒºåŸŸå¹¶æ·»åŠ iframe
					preview.innerHTML = '';
					preview.appendChild(iframe);
				} else if (language === 'markdown') {
					// ä½¿ç”¨marked.jsæ¸²æŸ“Markdown
					preview.innerHTML = marked.parse(content);

					// æ¸²æŸ“å®Œæˆåï¼Œé«˜äº®æ‰€æœ‰ä»£ç å—
					document.querySelectorAll('pre code').forEach((block) => {
						if (!block.classList.contains('language-math')) {
							hljs.highlightElement(block);
						}
					});

					// å¤„ç†æ•°å­¦å…¬å¼
					// katex.renderMathInElement(document.body);
					renderMathInElement(document.getElementById("preview"), {
						// customised options
						// â€¢ auto-render specific keys, e.g.:
						delimiters: [
							{ left: '$$', right: '$$', display: true },
							{ left: '$', right: '$', display: false }
						],
						// â€¢ rendering keys, e.g.:
						throwOnError: true
					});
				} else {
					preview.innerHTML = '<p>é¢„è§ˆåŠŸèƒ½ä»…æ”¯æŒHTMLå’ŒMarkdown</p>';
				}
			};

			// åˆå§‹åŒ–é¢„è§ˆ
			updatePreview();

			// æ›´æ–°å…‰æ ‡ä½ç½®æ˜¾ç¤º
			editor.onDidChangeCursorPosition((e) => {
				document.getElementById('cursor-position').textContent =
					`è¡Œ: ${e.position.lineNumber}, åˆ—: ${e.position.column}`;
			});

			// è¯­è¨€é€‰æ‹©å™¨
			const languageSelect = document.getElementById('language-select');
			languageSelect.addEventListener('change', () => {
				const language = languageSelect.value;
				monaco.editor.setModelLanguage(editor.getModel(), language);
				editor.setValue(defaultCode[language] || `// ${language} ä»£ç `);

				// å¦‚æœæ˜¯HTMLæˆ–Markdownè¯­è¨€ï¼Œæ˜¾ç¤ºé¢„è§ˆé¢æ¿
				if (language === 'html' || language === 'markdown') {
					document.getElementById('editor').style.width = "50%";
					document.getElementById('preview').style.display = 'block';
					document.getElementById('splitter').style.display = 'block';
					updatePreview();
				} else {
					document.getElementById('editor').style.width = "100%";
					document.getElementById('preview').style.display = 'none';
					document.getElementById('splitter').style.display = 'none';
				}
			});

			// è¿è¡ŒæŒ‰é’® (ä»…å¯¹JavaScriptæœ‰æ•ˆ)
			document.getElementById('run-btn').addEventListener('click', () => {
				if (languageSelect.value === 'javascript') {
					try {
						// ä½¿ç”¨evalè¿è¡Œä»£ç  (ä»…ç”¨äºæ¼”ç¤ºï¼Œç”Ÿäº§ç¯å¢ƒåº”æ›´å®‰å…¨åœ°å¤„ç†)
						eval(editor.getValue());
					} catch (error) {
						console.error(error);
						alert(`æ‰§è¡Œé”™è¯¯: ${error.message}`);
					}
				} else {
					alert('è¿è¡ŒåŠŸèƒ½ä»…æ”¯æŒJavaScriptä»£ç ');
				}
			});

			// é¢„è§ˆæŒ‰é’®
			document.getElementById('preview-btn').addEventListener('click', () => {
				const language = languageSelect.value;
				if (language === 'html' || language === 'markdown') {
					const preview = document.getElementById('preview');
					if (preview.style.display !== 'none')
						updatePreview();
				} else {
					alert('é¢„è§ˆåŠŸèƒ½ä»…æ”¯æŒHTMLå’ŒMarkdownä»£ç ');
				}
			});

			// ä¿å­˜æŒ‰é’®
			document.getElementById('save-btn').addEventListener('click', () => {
				const blob = new Blob([editor.getValue()], { type: 'text/plain' });
				const url = URL.createObjectURL(blob);
				const a = document.createElement('a');
				a.href = url;
				a.download = `code.${languageSelect.value}`;
				document.body.appendChild(a);
				a.click();
				document.body.removeChild(a);
				URL.revokeObjectURL(url);

				document.getElementById('file-info').textContent = `å·²ä¿å­˜: code.${languageSelect.value}`;
				setTimeout(() => {
					document.getElementById('file-info').textContent = 'æœªä¿å­˜çš„æ–‡ä»¶';
				}, 3000);
			});

			// ä¸»é¢˜åˆ‡æ¢
			let isDarkTheme = true;
			document.getElementById('theme-toggle').addEventListener('click', () => {
				isDarkTheme = !isDarkTheme;
				monaco.editor.setTheme(isDarkTheme ? 'vs-dark' : 'vs');
				document.getElementById('theme-toggle').textContent = isDarkTheme ? 'ğŸŒ“' : 'ğŸŒ’';
			});

			// è§†å›¾åˆ‡æ¢
			document.getElementById('view-toggle').addEventListener('click', () => {
				const preview = document.getElementById('preview');
				const splitter = document.getElementById('splitter');
				if (preview.style.display === 'none') {
					preview.style.display = 'block';
					splitter.style.display = 'block';
					document.getElementById('editor').style.width = "50%";
				} else {
					preview.style.display = 'none';
					splitter.style.display = 'none';
					document.getElementById('editor').style.width = "100%";
				}
			});

			// ç›‘å¬å†…å®¹å˜åŒ–
			editor.onDidChangeModelContent(() => {
				document.getElementById('file-info').textContent = 'æœªä¿å­˜çš„æ–‡ä»¶*';
				const language = languageSelect.value;
				if (language === 'html' || language === 'markdown') {
					updatePreview();
				}
			});

			// å­—ä½“è®¾ç½®
			const fontFamilySelect = document.getElementById('font-family');
			fontFamilySelect.addEventListener('change', () => {
				editor.updateOptions({ fontFamily: fontFamilySelect.value });
			});

			// å­—ä½“å¤§å°è®¾ç½®
			const fontSizeInput = document.getElementById('font-size');
			fontSizeInput.addEventListener('change', () => {
				const size = Math.min(32, Math.max(8, parseInt(fontSizeInput.value) || 14));
				fontSizeInput.value = size;
				editor.updateOptions({ fontSize: size });
			});

			// Tabå¤§å°è®¾ç½®
			const tabSizeInput = document.getElementById('tab-size');
			tabSizeInput.addEventListener('change', () => {
				const size = Math.min(8, Math.max(1, parseInt(tabSizeInput.value) || 2));
				tabSizeInput.value = size;
				editor.getModel().updateOptions({ tabSize: size });
			});

			// åˆ†å‰²æ¡æ‹–åŠ¨åŠŸèƒ½
			const splitter = document.getElementById('splitter');
			let isDragging = false;

			splitter.addEventListener('mousedown', (e) => {
				isDragging = true;
				document.body.style.cursor = 'col-resize';
				e.preventDefault();
			});

			document.addEventListener('mousemove', (e) => {
				if (!isDragging) return;

				const editorContainer = document.querySelector('.editor-container');
				const containerRect = editorContainer.getBoundingClientRect();
				const newEditorWidth = e.clientX - containerRect.left;
				const newPreviewWidth = containerRect.width - newEditorWidth - 5;

				if (newEditorWidth > 100 && newPreviewWidth > 100) {
					document.getElementById('editor').style.width = `${newEditorWidth}px`;
					document.getElementById('preview').style.width = `${newPreviewWidth}px`;
				}
			});

			document.addEventListener('mouseup', () => {
				isDragging = false;
				document.body.style.cursor = '';
			});
		};

		// åˆå§‹åŒ–åº”ç”¨
		document.addEventListener('DOMContentLoaded', initEditor);
	</script>
</body>

</html>